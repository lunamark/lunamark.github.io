<!DOCTYPE html>
<html>
    <head>
    <meta name="p:domain_verify" content="9014f386d3ae48f3e6761184cc355bd7"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Switching Microsoft Azure Subscriptions for WordPress Site &mdash; Lunamark</title>

    <link href="//fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    
    <!-- Bootstrap -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!-- Bootstrap Optional theme -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
        
    <link type="text/css" rel="stylesheet" href="/assets/main.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <!-- <link rel="apple-touch-icon" href="/images/logo-H.png"/> -->
    <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="Lunamark" />
    <meta name="title" content="Switching Microsoft Azure Subscriptions for WordPress Site ">
    <link rel="canonical" href="http://lunamark.github.io/Switching-Microsoft-Azure-Subscriptions-for-WordPress-Site.html">
 
       
    <meta property="og:title" content="Switching Microsoft Azure Subscriptions for WordPress Site "/>
    <meta property="og:url" content="http://lunamark.github.io/Switching-Microsoft-Azure-Subscriptions-for-WordPress-Site.html"/>

    <meta property="og:image" content="http://lunamark.github.io/images/logo-H.png"/>   

    <meta property="og:description" content="Have you ever wanted to move your WordPress Microsoft Azure Website from a pay-as-you-go subscription to a BizSpark subscription"/>
    <meta name="description" content="Have you ever wanted to move your WordPress Microsoft Azure Website from a pay-as-you-go subscription to a BizSpark subscription"/>

    <meta property="og:site_name" content="Lunamark">


    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9XWBGD');</script>
    <!-- End Google Tag Manager -->
         
</head>

    <body>
        
            <!-- Google Tag Manager (noscript) -->
            <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M9XWBGD" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
            <!-- End Google Tag Manager (noscript) -->
        

        <section class="site-nav">
    <header>
        <nav id="navigation">
            <a class="brand" href="/">
                <img src="/images/logo-H.png" alt="Logo">
            </a>
            <a href="/articles/" class="home">Articles</a>
            <a href="/services/">Services</a>
            <a href="/speaking.html">Speaking</a>
            <a href="/about.html">About</a>
        </nav>
        <!--<nav class="tagline">
            <span>Want to learn how to ship features to your software faster?</span>
            <a href="/roadmap.html" class="btn btn-outline">Learn More</a>
        </nav>-->
    </header>
</section>


        
<article class="container">
    <header>
        <div class="meta">
            By <address><a rel="author" href="" title="Paul Gower" target="_blank">Paul Gower</a></address> &mdash;
            <time pubdate datetime="2014-11-May" title="May 11, 2014">May 11, 2014</time>
        </div>
        <h1 class="title">Switching Microsoft Azure Subscriptions for WordPress Site</h1>
        
    </header>

    <section>
        <p>Have you ever wanted to move your WordPress <a href="http://azure.microsoft.com/">Microsoft Azure Website</a> from a pay-as-you-go subscription to the subscription that you get with an <a href="http://msdn.microsoft.com/subscriptions">MSDN license</a>? It’s not as easy as you would think. Today I spent several hours battling with <a href="http://azure.microsoft.com/">Microsoft Azure</a>, <a href="http://www.cleardb.com/">ClearDB</a> (service Microsoft Azure uses for MySql databases) and <a href="http://wordpress.org/">WordPress</a> trying to move my website, <a href="http://lunamark.com/">lunamark.com</a>, from my pay-as-you-go subscription to my subscription that is tied to my MSDN license.</p>

<p>A month ago, I setup my new business website lunamark.com using Microsoft Azure Websites. At that time I did not have my MSDN license, so I setup a pay-as-you-go subscription in order to use my custom domain. Moving my website from a pay-as-you-go subscription to the new subscription tied to my MSDN license took longer than I anticipated and required more steps. In the event that you have to move a Microsoft Azure Website between subscriptions, I hope the following notes will make it easier for you.</p>

<ol>
  <li>Backup your website
    <ul>
      <li>Backup the files for the source website by downloading the <em>wwwroot</em> folder using your favorite FTP program (I used <a href="http://cyberduck.io/">Cyberduck for Mac</a>. Find your FTP credentials in the source website’s publish profile.</li>
      <li>Backup your database which is a linked resource to the source website by using <em>mysqldump</em>.  If you don’t have that on your computer you can download the <a href="http://dev.mysql.com/downloads/mysql/">MySQL Suite</a> which will include both the <em>mysqldump</em> and <em>mysql</em> commands. Thanks to [John Papa’s blog post](http://www.johnpapa.net/azurecleardbmysql/ I was able to do easily backup and restore my MySql database. Here is the command I used on my Mac to backup my database:<br />
 <code style="font-size: small">
 /usr/local/mysql/bin/mysqldump -e -u[user] -p[password]
  -h[host] [database] &gt; [output file]
 </code><br />
 <em>Note: the -e makes multiple values rows for the insert syntax but is not required</em></li>
    </ul>
  </li>
  <li>Create a new Microsoft Azure Website (from WordPress gallery).  I will refer to this website as the destination website to keep the two straight.
<em>Note: This will require a new name (new_name.azurewebsites.net). Later we will need to replace the old_name with the new_name in the backup sql file created above.</em></li>
  <li>Get the connection string from the the destination website created in step 2 and use it to update the <em>wwwroot/wp-config.php</em> file downloaded from the source website with the new database name and login information.</li>
  <li>Connect to the destination website with your favorite FTP program and delete the wwwroot folder.</li>
  <li>Upload the source wwwroot folder with the updated wp-config.php file (which should now be configured to use the destination’s MySQL database)</li>
  <li>Edit the [output file] that was created in step 1 and replace the <em>old_name</em> of the website with the <em>new_name</em> that was created in step 2</li>
  <li>Use the <em>mysql</em> command to update your <em>new</em> database.<br />
<code style="font-size: small">
/usr/local/mysql/bin/mysql u[user] -p[password]
 -h[host] [database] &lt; [input file]
</code><br />
<em>Note: the [input file] would be the name of the [output file] that was created above and modified to replace the name of the old_name with the new_name of the Microsoft Azure Website</em></li>
  <li>Make sure you remove the old Microsoft Azure Website’s reference to the custom domain name you are planning to use.</li>
  <li>Now set it up your custom domain in the new Microsoft Azure Website.</li>
  <li>Last, I would recommend stopping the old Microsoft Azure Website to verify the new website is working as desired before deleting the old website</li>
</ol>

<p><strong>Please Note:</strong> The steps described above will require some downtime for your website. If downtime on your website is not an option, then watch <a href="http://www.hanselman.com/blog/PennyPinchingVideoMovingAnAzureWebsiteBetweenDataCenters.aspx">this Scott Hanselman video</a> where he recommends to use a load balancer to not have any downtime.</p>

        
<div class="social">
    <div>
        <a href="https://twitter.com/share" class="twitter-share-button"  data-text="Switching Microsoft Azure Subscriptions for WordPress Site" data-related="paulmgower">Tweet</a>
    </div>
    
    
    <div>
        <div class="fb-like" data-width="150" data-layout="button_count" data-action="like" data-show-faces="true" data-send="false"></div>
    </div>
    
    
    
    
</div>

    </section>

    <footer>
        <address>
            <img src="/images/paul.jpg">
            <p>Written by <strong><a rel="author" href="https://twitter.com/paulmgower" title="" target="_blank">Paul Gower</a></strong><br>
            <span class="muted">Principal Consultant / Owner, Lunamark</span>
            </p>
        </address>
    </footer>

    
    <section>
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'lunamark'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
    </section>
    
</article>


        <footer class="site-footer">
    <div class="container">
        <nav>
            <a href="/">Lunamark</a> &middot;
            <a href="/articles/">Articles</a> &middot;
            <a href="/services/">Services</a> &middot;
            <a href="/speaking.html">Speaking</a> &middot;
            <a href="/about.html">About</a>
        </nav>
        
        <nav class="social">
            
            <a href="https://twitter.com/paulmgower" title="Follow on Twitter" target="_blank"><i class="icon icon-twitter black"></i></a>
            
                
            <a href="/feed.xml" title="RSS Feed">
                <i class="icon icon-rss black"></i>
            </a>
        </nav>
    </div>
    <div class="container">
    <p class="copyright text-muted small">Copyright &copy; 2020 Lunamark All Rights Reserved</p> 
</div>

</footer>

        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script type="text/javascript" src="/assets/lib/jqBootstrapValidation.js"></script>
<script type="text/javascript" src="/assets/main.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=253595308025739";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>






    </body>
</html>
